{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}
{% block content %}
<div class="my-3 d-flex justify-content-between align-items-center">
    <h2>–°—Ç–∞—Ç—å–∏</h2>
    {% if current_user.is_authenticated and current_user.role in ["writer", "admin", "sozdatel"] %}
        <a href="{{ url_for('add_post') }}" class="btn btn-success">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—å—é</a>
    {% endif %}
</div>
{% for post in posts %}
    <div class="card mb-4">
        <div class="card-body">
            <h4 class="card-title"><a href="{{ url_for('post_detail', post_id=post.id) }}">{{ post.title }}</a></h4>
            <p class="card-text" style="white-space: pre-line;">{{ post.content[:200] ~ ('...' if post.content|length > 200 else '') }}</p>
            <div>
                <a href="{{ url_for('like_post', post_id=post.id) }}" class="btn btn-outline-primary btn-sm">üëç {{ post.likes }}</a>
                <a href="{{ url_for('dislike_post', post_id=post.id) }}" class="btn btn-outline-danger btn-sm">üëé {{ post.dislikes }}</a>
                {% if current_user.is_authenticated and current_user.role in ["writer", "admin", "sozdatel"] %}
                    <a href="{{ url_for('copy_post', post_id=post.id) }}" class="btn btn-secondary btn-sm">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</a>
                {% endif %}
                {% if current_user.is_authenticated and (post.author_id == current_user.id or current_user.role in ["admin", "sozdatel"]) and current_user.role in ["writer", "admin", "sozdatel"] %}
                    <a href="{{ url_for('edit_post', post_id=post.id) }}" class="btn btn-warning btn-sm">–ò–∑–º–µ–Ω–∏—Ç—å</a>
                {% endif %}
            </div>
        </div>
    </div>
{% else %}
    <p>–°—Ç–∞—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç.</p>
{% endfor %}
{% endblock %}